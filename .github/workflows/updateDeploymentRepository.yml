name: Update the deployment repository

on:
  push:
    branches:
      - main

permissions:
  contents: write
  pull-requests: write
  issues: write
  repository-projects: write
jobs:
  Update-the-repository:
    runs-on: ubuntu-latest
    environment: ACCESS_TOKEN
    steps:
      - name: Checkout code
        uses: actions/checkout@v4
        with:
          token: ${{ secrets.GITHUB_TOKEN }}

      - name: Git configuration
        run: |
          git config --global user.email vuwin24680@gmail.com
          git config --global user.name cielaton

      - name: Repository configuration and pushing
        run: |
          git config --list
          git remote set-url origin https://${{secrets.ACCESS_TOKEN}}github.com/cielaton/cielaton.github.io.git
          git push origin main
